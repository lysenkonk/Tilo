@model ProductView
@{
    ViewData["Title"] = "Product";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="container">
    <div id="content">
        @*<div id="ct_size_guide"></div>*@
        <div class="bProductView">
            <div class="bWrap">
                <div class="row">
                    <div class="col-lg-12">
                        <nav class="breadCrumbs">
                            <a asp-action="Index" asp-controller="Home">Главная</a>
                            &nbsp;/&nbsp;
                            <a asp-action="Index" asp-controller="Shop">Mагазин</a>
                            &nbsp;/&nbsp;
                            <a asp-action="List" asp-controller="Shop" asp-route-category="@Model.product.Category.Name" asp-route-page="1">@Model.product.Category.Name</a>
                        </nav>
                        <div class="product eProductView_body">
                            <div class="eProductView_images">
                                <div class="eProductView_slider">
                                    <div class="slick-slider">
                                        <div class="slick-list">
                                            <div class="slick-track">
                                                <div class="eProductView_image slick-slide slick-current slick-active">
                                                    @*<img width="600" height="436" src="~/files/main/newProducts/11.png" />*@
                                                    <a asp-action="Product" asp-controller="Shop" asp-route-id="@Model.product.Id">
                                                        @Html.Partial("Image.cshtml", @Model.product)
                                                    </a>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="eProductView_sliderNav">
                                    @*<div class="eProductView_sliderNavBtn">
                                            <div class="o-svg o-svg--slider-arrow-top">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                                    <path fill="#010101" d="M22.4 64.1l28.4-27.6 28.5 27.6 1.5-.9-30-29.1-30 29.1 1.6.9z"></path>
                                                </svg>
                                            </div>

                                        </div>*@
                                    <div class="slick-slider slick-vertical">
                                        <div class="slick-list draggable">
                                            <div class="slick-track">
                                                @foreach (var image in @Model.product.Images)
                                                {
                                                    <div class="eProductView_image slick-slide" style="width:176px">
                                                        <img width="170" class="sm_img" name="@image.Name" src="@Url.Content("/files/Sm/" + @image.Name)" />
                                                    </div>
                                                }

                                            </div>
                                        </div>
                                    </div>
                                    @*<div class="eProductView_sliderNavBtn jsSliderNavPrev">
                                            <div class="o-svg o-svg--slider-arrow-bottom">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                                                    <path fill="#010101" d="M23.1 34.1l28.4 27.6L80 34.1l1.5.9-30 29.1-30-29.1 1.6-.9z"></path>
                                                </svg>
                                            </div>
                                        </div>*@
                                </div>
                            </div>
                            <div class="eProductView_data">
                                <div class="eProductView_row mProductView_name">
                                    <h1 itemprop="name" class="eProductView_name">
                                        @Model.product.Name
                                    </h1>
                                </div>
                                <div itemprop="offers" itemscope="" itemtype="http://schema.org/Offer" class="eProductView_row mProductView_price">
                                    <div class="eProductView_price"><span class="woocommerce-Price-amount amount">@Model.product.Price &nbsp;<span class="woocommerce-Price-currencySymbol">грн</span></span></div>
                                </div>


                                <div class="eProductView_row">
                                    <div class="mProductView_form">
                                        <form class="variations_form cart " asp-action="AddToCart"
                                              asp-controller="Cart" method="post" enctype="multipart/form-data" id="@Model.product.Id">
                                            <input type="hidden" asp-for="@Model.product.Id" />
                                            <input type="hidden" asp-for="@Model.product.Name" />
                                            <input type="hidden" asp-for="@Model.product.Color" />

                                            <label asp-for="@Model.product.Size" class="col-sm-2 col-form-label-size">Размер:</label>
                                            <div class="col-sm-10">
                                                <select id="editable-select-size" asp-for="@Model.product.Size" class="form-control" asp-items="@(new SelectList(Model.Sizes, "Size"))">

                                                    <option value="@Model.product.Size"></option>
                                                </select>
                                                <span asp-validation-for="@Model.product.Size" class="text-danger"></span>
                                            </div>
                                            <input type="hidden" name="returnUrl" value="@ViewContext.HttpContext.Request.PathAndQuery()" />
                                            <span class="card-text p-1">
                                                @(Model.product.Description
                                                                                     ?? "(No Description Available")
                                                <button type="submit"
                                                        class="btn btn-primary btn-sm center-block"
                                                        style=" background-color:black; margin-top:20px">
                                                    Add To Cart
                                                </button>
                                            </span>
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <h4>Вам также могут понравиться:</h4>
                        </div>
                        <div class="text-left">
                            @foreach (var p in Model.Products)
                            {
                                <a asp-action="Product" asp-controller="Shop" asp-route-id="@p.Id">
                                    <img width="200" class="sm_img" name="@p.Images[0].Name" src="@Url.Content("/files/Sm/" + @p.Images[0].Name)" />
                                </a>
                            }
                            </div>
                    </div>
                </div>
        </div>
    </div>
</div>
<script>
    $(function () {
        var bgImg = document.getElementById("img_Bg");
        let smImages = document.getElementsByClassName("sm_img");
        //smImages.forEach(function (element) { element.addEventListener("click", tabbedImage(e), false) });
        for (let i = 0; i < smImages.length; i++) {
            smImages[i].addEventListener("click", function (e) { tabbedImage(e) }, false);
        }

        function tabbedImage(e) {
            let imgName = e.target.getAttribute("name");
            //let imgName = imgTitle.slice(0, imgTitle.indexOf("."));
            let imgSrc = "/Files/Bg/" + imgName;
            bgImg.setAttribute('src', imgSrc);
        }
    })
</script>

