@model ProductsViewModel
@{
    ViewData["Title"] = "List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="new-products appear-from-nowhere shown">
    <div class="container parent-height">
        <div class="row filter">
            <form asp-action="ListFilteringProducts" asp-route-category="@Model.CurrentCategory"
                  asp-route-sortOrder="@(Model.SortViewModel.Current)">
                <div class="col-sm-9">
                    @*<select name="minPrice" class="minPrice" asp-for="@Model.MinPrice" asp-items="@ViewBag.PricesForFiltering">
                        </select>*@
                    <select name="color" asp-items="@Model.FilterViewModel.Colors">
                        @*<option selected value="@Model.FilterViewModel.SelectedColor"></option>*@
                    </select>
                    <input type="submit" value="Фильтр" />
                </div>

                <div class="col-sm-9">
                    @*<select name="color" asp-items="@Model.SortViewModel.">
                    </select>*@
                </div>
            </form>
        </div>
        <div class="row parent-height appearing-group shown">
            <div class="col-xs-12 parent-height">
                <div class="wrapper">
                    <input type="hidden" asp-for="@Model.CurrentCategory" />

                    <ul class="products clearfix">
                        @foreach (var p in Model.Products)
                        {
                            <li class="product inner-appearing-object">
                                <div class="picture img">
                                    <a asp-action="Product" asp-controller="Shop" asp-route-id="@p.Id">
                                        @*<img src="@Url.Content("/files/main/newProducts/" + p.Images[0].Name)">*@

                                        @if (p.Images.Count > 0)
                                        {
                                            <img src="@Url.Content("/files/Bg/" + p.Images[0].Name)">
                                        }
                                        else
                                        {
                                            <img src="@Url.Content("/files/Bg/noPhoto.jpg")">
                                        }

                                    </a>
                                </div>
                                <div class="description">
                                    <div class="information">
                                        <div class="name">
                                            <a asp-action="Product" asp-controller="Shop" asp-route-id="@p.Id">
                                                <p>@p.Name</p>
                                            </a>
                                        </div>
                                        <div class="price">
                                            <p></p>
                                            <span class="woocommerce-Price-currencySymbol">@p.Price грн</span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        }

                    </ul>
                </div>
            </div>
        </div>
        <div page-model="@Model.PagingInfo" page-action="ListFilteringProducts" page-classes-enabled="true"
             page-class="btn" page-class-normal="btn-secondary" page-url-category="@Model.CurrentCategory" page-url-color="@(Model.FilterViewModel.SelectedColor)"
             page-url-sortOrder="@(Model.SortViewModel.Current)"
             page-class-selected="btn-primary"
             class="pagination">
        </div>
    </div>

</section> 
